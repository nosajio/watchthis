import React, { PropTypes } from 'react'

const Logo = React.createClass({
  propTypes: {
    busy: PropTypes.bool
  },

  getInitialState () {
    return {
      flipLenses: false,
      interval: null,
    };
  },

  componentDidMount () {
    this.animateIfBusy();
  },

  componentDidUpdate () {
    this.animateIfBusy();
  },

  animateIfBusy () {
    const animationDuration = 200; // milliseconds
    const {busy} = this.props;
    const {interval} = this.state;
    if (! busy && interval) {
      clearInterval(interval);
      this.setState({ interval: null });
      return;
    }
    if (busy && ! interval) {
      const newInterval = setInterval(
        () => this.setState({ flipLenses: ! this.state.flipLenses })
        , animationDuration
      );
      this.setState({ interval: newInterval });
    }
  },

  render () {
    const {flipLenses} = this.state;
    const svgStyles = `
      .bg-fill    {fill:#efefef;}
      .fg-fill    {fill:#fff;}
      .red-lens   {fill:#ff4e00;}
      .blue-lens  {fill:#1fefff;}
      .red-lens,
      .blue-lens  {opacity:0.9;}
    `;

    return (
      <div className="logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 127.76 80">
          <defs>
            <style>{svgStyles}</style>
          </defs>
          <g>
            <g>
              <path className="bg-fill" d="M127.4 38.1C120.7 36.44 76 19.82 76 19.82L62.3 13.6 36 1.52c-2.67-1.22-17.8-.3-24.54.85-2.95.41-3.11 2.44-2.09 3.87s3.63 4.35 4.79 5 4.2-.07 7.16-.53c2.58-.4 7.18-1.75 8.62-1.29s17.22 9.8 17.22 9.8l14.45 10 10.5 7.4"/>
              <path d="M119.61 71.42L61.07 30 46.65 20c-6-3.58-16-9.36-17-9.69-.76-.24-3.49.35-5.3.74-1.06.23-2.07.45-2.9.58l-1.55.25c-3.07.52-5 .8-6.19.18-1.38-.73-4.09-3.81-5.11-5.25a3.4 3.4 0 0 1-.51-3.3c.33-.77 1.16-1.74 3.22-2C17.93.32 33.35-.73 36.4.67l26.29 12.08L76.36 19c1.39.52 44.76 16.63 51.27 18.23l-6.69 1.21c-6.68-1.65-43.43-17-45.26-17.7h-.06l-13.7-6.22c-.24-.11-23.51-11.32-26.15-12.53-2.24-1-16.94.14-24.14 1.37-.94.13-1.57.46-1.77.92a1.59 1.59 0 0 0 .31 1.48 23.7 23.7 0 0 0 4.46 4.68c.67.36 3.07 0 5-.37l1.57-.26c.78-.12 1.75-.33 2.79-.56 3-.66 5.12-1.06 6.26-.7C31.7 9 45 16.81 47.63 18.37h.06l15.52 9.86 62 41.38z"/>
              <path className="bg-fill" d="M2.39 34.73L76.65 9c4-1.53 5.11-1.8 7.53-.54.11 0 21.91 10.07 21.91 10.07 1.75 1.42.73 2.69-2.5 3.61-.26 0-6.37 1.52-6.37 1.52-3 1-5.12-1.64-6.23-2.36-.48-.4-5.4-3.81-6.78-4.5s-2.12-1-4.13.27-29.88 19.7-29.88 19.7"/>
              <path d="M7 35.81l-4.95-2L76.5 8.16c4.06-1.53 5.06-2 8.45-.45 0 .07 3.58 1.67 21.7 10l.11.1a2.4 2.4 0 0 1 1.12 2.43c-.24 1.18-1.57 2.09-4 2.79h-.12c-.27.05-4 .94-6.26 1.49-2.9.94-5-.86-6.32-1.94a8.56 8.56 0 0 0-.68-.54l-.12-.04c-.49-.4-5.33-3.75-6.6-4.38s-1.63-.81-3.2.22c-2 1.3-68 44.84-68.3 45l-3.46-1.8C9.1 60.9 77.56 17.6 79.56 16.3c2.35-1.54 3.46-1.13 5.06-.33 1.41.7 6.19 4 6.91 4.58a10.09 10.09 0 0 1 .83.65c1.44 1.21 2.78 2.17 4.56 1.58h.07c2.16-.52 5.73-1.38 6.36-1.52 2.45-.7 2.64-1.35 2.65-1.36s0-.23-.42-.55c-7.41-3.41-21.35-9.83-21.77-10h-.07C81.68 8.21 81 8.36 77 9.87z"/>
              <path className="fg-fill" d="M3.61 35.77S1.7 70.1 1.74 70.36c3.58-.45 7 2 7 7.26 0 0 47.31.79 47.49.6 4.38-9.88 5.1-12.1 7.53-12.06s5.09 2.49 6.35 11.59c0 0 48.4-.7 48.32-.85.38-2.33 2.33-5.75 5.57-6.31L125.9 39zm49.63 33.4c-.28 1.63-2 2.42-5.07 2.43l-33-.74c-1.85 0-2.83-1.89-3-3.91.11 0 1.1-21.47 1.1-21.47 0-2 2.56-1.88 2.56-1.88l34.09.73c2.36-.1 4.43.31 4.52 3.9-.17.07.04 17.05-1.21 20.94zm60.53 1.22C113 72 77.66 71 77.66 71c-2.44 0-2.58-2.66-2.75-4.43l-.13-19.53a2.61 2.61 0 0 1 2.81-2.66l37.38.8c1.14 2.55-.8 24.07-1.2 25.21z"/>
              <path d="M5 68.92a7.38 7.38 0 0 1 2.59 1.48 8.63 8.63 0 0 1 2.77 5.49c16.53.27 39.61.62 44.71.6A2.28 2.28 0 0 0 57.23 75c1.72-3.91 1.68-3.88 2.65-5.39.84-1.32 1.65-3.54 3.88-3.46 2.75.1 6.53 2.7 7.82 10.3 16.67-.24 39.93-1.1 45.47-1.25a9.68 9.68 0 0 1 5.28-6L124 40.67 5.26 37.57c-.62 11.14-1.43 26-1.69 31a7.65 7.65 0 0 1 1.43.35zm115 8.89a2.07 2.07 0 0 1-2 .88h-1.57l-5.5.12-16.61.29-24.13.37h-1.55L68.37 78c-.87-6.27-2.6-10-4.64-10.08-.32 0-.58 0-1.23 1a68.08 68.08 0 0 0-3.5 7.3l-1.2 2.71-.13.29-.22.23c-.55.56-.76.56-3.35.56h-5.42c-3.95 0-9.44-.11-16.32-.22-11.72-.17-23.56-.37-23.68-.37L7 79.34v-1.71A5.94 5.94 0 0 0 5.28 73 4.16 4.16 0 0 0 2 72.09l-1.69.21L0 70.63c0-.25-.07-.44 1.85-34.95L2 34l125.8 3.28-2.09 34.82-1.37.23c-2.12.36-3.56 2.63-4 4.34"/>
              {flipLenses ? (
                <path className="red-lens" d="M77.6 44.36l37.38.8c1.14 2.57-.8 24.1-1.2 25.23C113 72 77.66 71 77.66 71c-2.44 0-2.58-2.66-2.75-4.43l-.13-19.53a2.61 2.61 0 0 1 2.82-2.68z"/>
              ) : (
                <path className="blue-lens" d="M77.6 44.36l37.38.8c1.14 2.57-.8 24.1-1.2 25.23C113 72 77.66 71 77.66 71c-2.44 0-2.58-2.66-2.75-4.43l-.13-19.53a2.61 2.61 0 0 1 2.82-2.68z"/>
              )}
              {flipLenses ? (
                <path className="blue-lens" d="M15.81 43.6c.11 0 34.09.73 34.09.73 2.36-.1 4.43.31 4.52 3.9-.15.08.06 17.06-1.18 21-.28 1.63-2 2.42-5.07 2.43l-33-.74c-1.85 0-2.83-1.89-3-3.91.11 0 1.1-21.47 1.1-21.47-.01-2.02 2.54-1.94 2.54-1.94z"/>
              ) : (
                <path className="red-lens" d="M15.81 43.6c.11 0 34.09.73 34.09.73 2.36-.1 4.43.31 4.52 3.9-.15.08.06 17.06-1.18 21-.28 1.63-2 2.42-5.07 2.43l-33-.74c-1.85 0-2.83-1.89-3-3.91.11 0 1.1-21.47 1.1-21.47-.01-2.02 2.54-1.94 2.54-1.94z"/>
              )}
              <path d="M14.15 71.64c-1.57-.5-2.68-2.19-2.93-4.6l.66-.53-.22-.35a.92.92 0 0 0-.42.62c.11-.76.71-13.16 1.08-21.32a2.55 2.55 0 0 1 .77-1.85 3.26 3.26 0 0 1 2.31-.94H15c1 0 23 .49 34.45.73 1.4-.06 3.2 0 4.34 1.1a5 5 0 0 1 1.46 3.71l-.45.85a1 1 0 0 0 .51-.67v2.78c-.07 5.3-.18 15.14-1.13 18.23-.39 2.08-2.4 3.14-6 3.14l-33-.74a3.29 3.29 0 0 1-1.03-.16zm-1.06-4.7c.16 1.42.79 3.06 2.09 3.06l33 .7c1.74 0 3.89-.31 4.12-1.67v-.14c.88-2.75 1-13 1.06-17.87 0-1.54 0-3 .08-3 0-2-.28-2-.75-2.4s-1.34-.6-2.79-.6h-.16C21.57 45 16 44.57 15 44.52a1.8 1.8 0 0 0-.94.42c-.09.09.11.23.1.54h.08s-.28 5.35-.54 10.7c-.15 3.11-.29 5.61-.39 7.4s-.16 2.83-.23 3.36zM15 44.52zm61.56 27.23c-2.17-.69-2.42-3.37-2.56-4.9v-.36c0-.53-.07-11.93-.13-19.47v-.09a3.55 3.55 0 0 1 3.79-3.5l37.35.8.83.56c1.32 3-.8 24.87-1.18 25.92v.09c-.36.76-.73 1.54-19.19 1.43-8.84-.05-17.7-.3-17.79-.3a3.72 3.72 0 0 1-1.12-.18zM75.84 66v.45c.22 2.31.53 3.46 1.82 3.48 15.42.44 32.61.54 35.27-.21.52-2.88 1.9-19.95 1.3-23.68l-36.68-.77h-.06c-.16 0-1.6-.32-1.79 1.54.13 14.91.15 19.18.12 19.18z"/>
            </g>
          </g>
        </svg>
      </div>
    )
  }
});

export default Logo;
